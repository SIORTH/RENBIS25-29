<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Indikator Capaian Tahunan | RENBIS 2025–2029</title>
	<meta name="robots" content="noindex, nofollow">
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-adapter-date-fns/dist/chartjs-adapter-date-fns.bundle.min.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background: linear-gradient(135deg, #f9fafb 0%, #e5e7eb 100%);
            color: #1f2937;
        }
        .chart-container {
            position: relative;
            height: 350px;
            width: 100%;
        }
        .card-style {
            background: white;
            border-radius: 1rem; /* 16px */
            box-shadow: 0 10px 15px -3px rgb(0 0 0 / 0.05), 0 4px 6px -4px rgb(0 0 0 / 0.05);
            border: 1px solid rgba(0, 0, 0, 0.05);
            transition: all 0.3s ease-in-out;
        }
        .card-style:hover {
            box-shadow: 0 20px 25px -5px rgb(0 0 0 / 0.1), 0 8px 10px -6px rgb(0 0 0 / 0.1);
            transform: translateY(-2px);
        }
        .table-header th {
            border-bottom: 2px solid #e5e7eb;
        }
    </style>
</head>
<body class="min-h-screen">

    <div class="container mx-auto p-4 sm:p-6 lg:p-8">
        <!-- Header -->
        <header class="mb-10 text-center">
            <h1 class="text-3xl sm:text-4xl font-extrabold text-gray-900 tracking-tight">INDIKATOR CAPAIAN TAHUNAN</h1>
            <p class="text-md sm:text-lg text-gray-600 mt-2">PERUMDA Air Minum Tirta Indragiri (2025-2029)</p>
        </header>

        <!-- Main Content -->
        <main>
            <!-- Comparative Table -->
            <div class="card-style p-4 sm:p-6 mb-8">
                <h3 class="text-xl font-bold mb-4 text-gray-900">Indikator Kinerja Utama</h3>
                <div class="overflow-x-auto">
                    <table class="min-w-full">
                        <thead class="table-header">
                            <tr>
                                <th scope="col" class="px-6 py-4 text-left text-xs font-bold text-gray-500 uppercase tracking-wider">Indikator</th>
                                <th scope="col" class="px-6 py-4 text-center text-xs font-bold text-gray-500 uppercase tracking-wider">2025</th>
                                <th scope="col" class="px-6 py-4 text-center text-xs font-bold text-gray-500 uppercase tracking-wider">2026</th>
                                <th scope="col" class="px-6 py-4 text-center text-xs font-bold text-gray-500 uppercase tracking-wider">2027</th>
                                <th scope="col" class="px-6 py-4 text-center text-xs font-bold text-gray-500 uppercase tracking-wider">2028</th>
                                <th scope="col" class="px-6 py-4 text-center text-xs font-bold text-gray-500 uppercase tracking-wider">2029</th>
                            </tr>
                        </thead>
                        <tbody id="kpi-table-body" class="bg-white divide-y divide-gray-200">
                            <!-- Rows will be injected by JavaScript -->
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Charts Grid -->
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                <div class="card-style p-6">
                    <h3 class="text-lg font-semibold mb-4 text-gray-900">Proyeksi Sambungan Baru & Cakupan Layanan</h3>
                    <div class="chart-container">
                        <canvas id="sambunganCakupanChart"></canvas>
                    </div>
                </div>
                <div class="card-style p-6">
                    <h3 class="text-lg font-semibold mb-4 text-gray-900">Proyeksi Volume Produksi Air Minum (m³/hari)</h3>
                    <div class="chart-container">
                        <canvas id="produksiChart"></canvas>
                    </div>
                </div>
                <div class="card-style p-6">
                    <h3 class="text-lg font-semibold mb-4 text-gray-900">Target Penurunan NRW & Peningkatan IKM</h3>
                    <div class="chart-container">
                        <canvas id="nrwIkmChart"></canvas>
                    </div>
                </div>
                <div class="card-style p-6">
                    <h3 class="text-lg font-semibold mb-4 text-gray-900">Proyeksi Efisiensi & Pelatihan SDM (Kumulatif)</h3>
                    <div class="chart-container">
                        <canvas id="efisiensiSdmChart"></canvas>
                    </div>
                </div>
            </div>
        </main>
        
        <footer class="text-center mt-12 py-4 border-t border-gray-200">
            <p class="text-sm text-gray-500">&copy; 2025 PERUMDA Air Minum Tirta Indragiri. Dasbor ini dibuat berdasarkan dokumen DRAFT RENBIS V.09.</p>
        </footer>
    </div>

    <script>
        // Data Store
        const kpiData = [
            { indicator: 'Sambungan Baru (Unit)', values: [5105, 4854, 5620, 7210, 9311], format: (val) => val.toLocaleString('id-ID') },
            { indicator: 'Total Proyeksi SR', values: [17162, 22016, 27636, 34846, 44157], format: (val) => val.toLocaleString('id-ID') },
            { indicator: 'Volume Produksi (m³/hari)', values: [7791, 9879, 12504, 16133, 21771], format: (val) => val.toLocaleString('id-ID') },
            { indicator: 'Cakupan Layanan (%)', values: [9.4, 12.1, 15.2, 19.1, 24.2], format: (val) => `${val.toLocaleString('id-ID', {minimumFractionDigits: 1, maximumFractionDigits: 1})}%` },
            { indicator: 'Tingkat Kehilangan Air (NRW)', values: [30.0, 27.5, 25.0, 22.5, 20.0], format: (val) => `${val.toLocaleString('id-ID', {minimumFractionDigits: 2, maximumFractionDigits: 2})}%` },
            { indicator: 'Skor Kepuasan (IKM)', values: [90.2, 91.4, 92.6, 93.8, 95.0], format: (val) => val.toLocaleString('id-ID') },
            { indicator: 'Penyelesaian Aduan', values: [48, 42, 36, 30, 24], format: (val) => `< ${val} Jam` },
            { indicator: 'SDM Dilatih (Orang)', values: [25, 25, 25, 25, 25], format: (val) => val.toLocaleString('id-ID') },
            { indicator: 'Efisiensi Operasional (Rp/m³)', values: [4532, 3628, 2968, 2418, 1960], format: (val) => `Rp ${val.toLocaleString('id-ID')}` }
        ];

        const years = ['2025', '2026', '2027', '2028', '2029'];
        
        function populateTable() {
            const tableBody = document.getElementById('kpi-table-body');
            kpiData.forEach((kpi, index) => {
                const row = document.createElement('tr');
                if (index % 2 === 1) {
                    row.className = 'bg-gray-50';
                }
                
                let rowHtml = `<td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">${kpi.indicator}</td>`;
                kpi.values.forEach(value => {
                    rowHtml += `<td class="px-6 py-4 whitespace-nowrap text-sm text-gray-600 text-center">${kpi.format(value)}</td>`;
                });
                row.innerHTML = rowHtml;
                tableBody.appendChild(row);
            });
        }

        // Chart Data
        const dataSambunganBaru = kpiData.find(k => k.indicator === 'Sambungan Baru (Unit)').values;
        const dataCakupan = kpiData.find(k => k.indicator === 'Cakupan Layanan (%)').values;
        const dataProduksi = kpiData.find(k => k.indicator === 'Volume Produksi (m³/hari)').values;
        const dataNrw = kpiData.find(k => k.indicator === 'Tingkat Kehilangan Air (NRW)').values;
        const dataIkm = kpiData.find(k => k.indicator === 'Skor Kepuasan (IKM)').values;
        const dataEfisiensi = kpiData.find(k => k.indicator === 'Efisiensi Operasional (Rp/m³)').values;
        const dataSdm = [25, 50, 75, 100, 125]; // Cumulative

        document.addEventListener('DOMContentLoaded', () => {
            populateTable();
        });

        // Chart.js Global Config for Light Theme
        Chart.defaults.color = '#6B7280';
        Chart.defaults.borderColor = 'rgba(0, 0, 0, 0.05)';
        Chart.defaults.font.family = "'Inter', 'sans-serif'";

        const chartOptions = {
            responsive: true,
            maintainAspectRatio: false,
            interaction: { mode: 'index', intersect: false },
            scales: {
                x: { grid: { display: false }, ticks: { color: '#6B7280' } },
                y: { grid: { color: 'rgba(0, 0, 0, 0.05)' }, ticks: { color: '#6B7280' } }
            },
            plugins: {
                legend: { position: 'bottom', labels: { color: '#374151' } },
                tooltip: {
                    backgroundColor: '#ffffff',
                    titleColor: '#111827',
                    bodyColor: '#374151',
                    titleFont: { size: 14, weight: 'bold' },
                    bodyFont: { size: 12 },
                    padding: 12,
                    cornerRadius: 8,
                    borderColor: 'rgba(0, 0, 0, 0.1)',
                    borderWidth: 1,
                    boxShadow: '0 4px 6px rgba(0,0,0,0.1)'
                }
            }
        };

        // Chart 1: Sambungan & Cakupan
        const ctx1 = document.getElementById('sambunganCakupanChart').getContext('2d');
        const gradient1 = ctx1.createLinearGradient(0, 0, 0, 350);
        gradient1.addColorStop(0, 'rgba(139, 92, 246, 0.2)');
        gradient1.addColorStop(1, 'rgba(139, 92, 246, 0)');
        new Chart(ctx1, {
            type: 'bar',
            data: {
                labels: years,
                datasets: [{
                    label: 'Sambungan Baru (Unit)',
                    data: dataSambunganBaru,
                    backgroundColor: 'rgba(59, 130, 246, 0.8)',
                    borderColor: 'rgba(59, 130, 246, 1)',
                    borderWidth: 2, borderRadius: 4, yAxisID: 'y'
                }, {
                    label: 'Cakupan Layanan (%)',
                    data: dataCakupan,
                    type: 'line',
                    borderColor: 'rgba(139, 92, 246, 1)',
                    backgroundColor: gradient1,
                    tension: 0.4, fill: true, yAxisID: 'y1',
                    pointBackgroundColor: '#fff',
                    pointBorderColor: 'rgba(139, 92, 246, 1)'
                }]
            },
            options: { ...chartOptions, scales: { x: chartOptions.scales.x, y: { type: 'linear', display: true, position: 'left', title: { display: true, text: 'Jumlah Unit' } }, y1: { type: 'linear', display: true, position: 'right', title: { display: true, text: 'Persentase (%)' }, grid: { drawOnChartArea: false } } } }
        });

        // Chart 2: Produksi
        const ctx2 = document.getElementById('produksiChart').getContext('2d');
        const gradient2 = ctx2.createLinearGradient(0, 0, 0, 350);
        gradient2.addColorStop(0, 'rgba(16, 185, 129, 0.3)');
        gradient2.addColorStop(1, 'rgba(16, 185, 129, 0)');
        new Chart(ctx2, {
            type: 'bar',
            data: {
                labels: years,
                datasets: [{
                    label: 'Volume Produksi (m³/hari)',
                    data: dataProduksi,
                    backgroundColor: gradient2,
                    borderColor: 'rgba(16, 185, 129, 1)',
                    borderWidth: 2, borderRadius: 4
                }]
            },
            options: chartOptions
        });

        // Chart 3: NRW & IKM
        const ctx3 = document.getElementById('nrwIkmChart').getContext('2d');
        const gradient3a = ctx3.createLinearGradient(0, 0, 0, 350);
        gradient3a.addColorStop(0, 'rgba(220, 38, 38, 0.2)');
        gradient3a.addColorStop(1, 'rgba(220, 38, 38, 0)');
        const gradient3b = ctx3.createLinearGradient(0, 0, 0, 350);
        gradient3b.addColorStop(0, 'rgba(217, 119, 6, 0.2)');
        gradient3b.addColorStop(1, 'rgba(217, 119, 6, 0)');
        new Chart(ctx3, {
            type: 'line',
            data: {
                labels: years,
                datasets: [{
                    label: 'NRW (%)',
                    data: dataNrw,
                    borderColor: 'rgba(239, 68, 68, 1)',
                    backgroundColor: gradient3a,
                    yAxisID: 'y', tension: 0.4, fill: true
                }, {
                    label: 'Skor IKM',
                    data: dataIkm,
                    borderColor: 'rgba(245, 158, 11, 1)',
                    backgroundColor: gradient3b,
                    yAxisID: 'y1', tension: 0.4, fill: true
                }]
            },
            options: { ...chartOptions, scales: { x: chartOptions.scales.x, y: { type: 'linear', display: true, position: 'left', title: { display: true, text: 'Persentase (%)' } }, y1: { type: 'linear', display: true, position: 'right', title: { display: true, text: 'Skor (0-100)' }, grid: { drawOnChartArea: false } } } }
        });

        // Chart 4: Efisiensi & SDM
        const ctx4 = document.getElementById('efisiensiSdmChart').getContext('2d');
        new Chart(ctx4, {
            type: 'bar',
            data: {
                labels: years,
                datasets: [{
                    label: 'Biaya per m³ Terjual (Rp)',
                    data: dataEfisiensi,
                    backgroundColor: 'rgba(37, 99, 235, 0.8)',
                    borderColor: 'rgba(37, 99, 235, 1)',
                    borderWidth: 2, borderRadius: 4, yAxisID: 'y'
                }, {
                    label: 'SDM Dilatih (Kumulatif)',
                    data: dataSdm,
                    type: 'line',
                    borderColor: 'rgba(20, 184, 166, 1)',
                    backgroundColor: 'rgba(20, 184, 166, 0.1)',
                    yAxisID: 'y1', tension: 0.4, fill: false,
                    pointBackgroundColor: '#fff',
                    pointBorderColor: 'rgba(20, 184, 166, 1)'
                }]
            },
            options: { ...chartOptions, scales: { x: chartOptions.scales.x, y: { type: 'linear', display: true, position: 'left', title: { display: true, text: 'Rupiah per m³' } }, y1: { type: 'linear', display: true, position: 'right', title: { display: true, text: 'Jumlah Orang' }, grid: { drawOnChartArea: false } } } }
        });
    </script>

</body>
</html>
