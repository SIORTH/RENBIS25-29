<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard Final - Capaian Tahunan RENBIS 2025–2029</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-adapter-date-fns/dist/chartjs-adapter-date-fns.bundle.min.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #F9FAFB; /* Light Gray Background */
        }
        .chart-container {
            position: relative;
            height: 350px;
            width: 100%;
        }
        .card-style {
            background: white;
            border: 1px solid #E5E7EB;
            box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.07), 0 2px 4px -2px rgb(0 0 0 / 0.07);
        }
        .custom-select {
            -webkit-appearance: none;
            -moz-appearance: none;
            appearance: none;
            background-image: url('data:image/svg+xml;charset=US-ASCII,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%22292.4%22%20height%3D%22292.4%22%3E%3Cpath%20fill%3D%22%234B5563%22%20d%3D%22M287%2069.4a17.6%2017.6%200%200%200-13-5.4H18.4c-5%200-9.3%201.8-12.9%205.4A17.6%2017.6%200%200%200%200%2082.2c0%205%201.8%209.3%205.4%2012.9l128%20127.9c3.6%203.6%207.8%205.4%2012.8%205.4s9.2-1.8%2012.8-5.4L287%2095c3.5-3.5%205.4-7.8%205.4-12.8%200-5-1.9-9.4-5.4-13z%22%2F%3E%3C%2Fsvg%3E');
            background-repeat: no-repeat;
            background-position: right 0.7rem center;
            background-size: 0.65rem auto;
        }
    </style>
</head>
<body class="text-gray-800">

    <div class="container mx-auto p-4 sm:p-6 lg:p-8">
        <!-- Header & Year Selector -->
        <header class="mb-8">
            <div class="flex flex-col md:flex-row justify-between items-center mb-2">
                <div>
                    <h1 class="text-2xl sm:text-3xl font-bold text-gray-900">Indikator Capaian Tahunan RENBIS 2025–2029</h1>
                    <p class="text-md sm:text-lg text-gray-600 mt-1">PERUMDA Air Minum Tirta Indragiri</p>
                </div>
                <div class="mt-4 md:mt-0">
                    <label for="year-selector" class="text-sm text-gray-600 mr-2">Pilih Tahun:</label>
                    <select id="year-selector" class="custom-select bg-white border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5">
                        <option value="2025" selected>2025</option>
                        <option value="2026">2026</option>
                        <option value="2027">2027</option>
                        <option value="2028">2028</option>
                        <option value="2029">2029</option>
                    </select>
                </div>
            </div>
        </header>

        <!-- Main Content -->
        <main>
            <!-- Key Metrics Cards -->
            <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
                <!-- Card 1: Sambungan Langganan -->
                <div class="card-style p-6 rounded-xl flex items-start gap-4 transition-all duration-300 hover:shadow-lg hover:-translate-y-1">
                    <div class="bg-blue-100 p-3 rounded-lg"><svg class="w-6 h-6 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path></svg></div>
                    <div>
                        <h3 id="card-title-1" class="font-semibold text-gray-500">Sambungan Baru (2025)</h3>
                        <p id="card-value-1" class="text-3xl font-bold text-gray-900 mt-1">5.105 <span class="text-lg font-medium text-gray-500">Unit</span></p>
                        <p id="card-total-sr" class="text-sm text-gray-500 mt-2">Total Proyeksi: <span class="font-semibold text-gray-700">17.162 SR</span></p>
                    </div>
                </div>
                <!-- Card 2: Produksi Air -->
                <div class="card-style p-6 rounded-xl flex items-start gap-4 transition-all duration-300 hover:shadow-lg hover:-translate-y-1">
                    <div class="bg-green-100 p-3 rounded-lg"><svg class="w-6 h-6 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 12l3-3 3 3 4-4M8 21l4-4 4 4M3 4h18M4 4h16v12a2 2 0 01-2 2H6a2 2 0 01-2-2V4z"></path></svg></div>
                    <div>
                        <h3 id="card-title-2" class="font-semibold text-gray-500">Target Produksi Air (2025)</h3>
                        <p id="card-value-2" class="text-3xl font-bold text-gray-900 mt-1">7.791 <span class="text-lg font-medium text-gray-500">m³/hari</span></p>
                    </div>
                </div>
                <!-- Card 3: Cakupan Layanan -->
                <div class="card-style p-6 rounded-xl flex items-start gap-4 transition-all duration-300 hover:shadow-lg hover:-translate-y-1">
                    <div class="bg-purple-100 p-3 rounded-lg"><svg class="w-6 h-6 text-purple-600" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283-.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"></path></svg></div>
                    <div>
                        <h3 id="card-title-3" class="font-semibold text-gray-500">Cakupan Layanan (2025)</h3>
                        <p id="card-value-3" class="text-3xl font-bold text-gray-900 mt-1">9,4%</p>
                    </div>
                </div>
                <!-- Card 4: NRW -->
                <div class="card-style p-6 rounded-xl flex items-start gap-4 transition-all duration-300 hover:shadow-lg hover:-translate-y-1">
                    <div class="bg-red-100 p-3 rounded-lg"><svg class="w-6 h-6 text-red-600" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19.428 15.428a2 2 0 00-1.022-.547l-2.387-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z"></path></svg></div>
                    <div>
                        <h3 id="card-title-4" class="font-semibold text-gray-500">Target Penurunan NRW (2025)</h3>
                        <p id="card-value-4" class="text-3xl font-bold text-gray-900 mt-1">30,00%</p>
                    </div>
                </div>
                 <!-- Card 5: IKM -->
                <div class="card-style p-6 rounded-xl flex items-start gap-4 transition-all duration-300 hover:shadow-lg hover:-translate-y-1">
                    <div class="bg-yellow-100 p-3 rounded-lg"><svg class="w-6 h-6 text-yellow-600" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14.828 14.828a4 4 0 01-5.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg></div>
                    <div>
                        <h3 id="card-title-5" class="font-semibold text-gray-500">Skor Kepuasan (IKM) (2025)</h3>
                        <p id="card-value-5" class="text-3xl font-bold text-gray-900 mt-1">90.2 <span class="text-lg font-medium text-gray-500">/100</span></p>
                    </div>
                </div>
                <!-- Card 6: Aduan Pelanggan -->
                <div class="card-style p-6 rounded-xl flex items-start gap-4 transition-all duration-300 hover:shadow-lg hover:-translate-y-1">
                    <div class="bg-indigo-100 p-3 rounded-lg"><svg class="w-6 h-6 text-indigo-600" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg></div>
                    <div>
                        <h3 id="card-title-6" class="font-semibold text-gray-500">Penyelesaian Aduan (2025)</h3>
                        <p id="card-value-6" class="text-3xl font-bold text-gray-900 mt-1">&lt; 48 <span class="text-lg font-medium text-gray-500">Jam</span></p>
                    </div>
                </div>
                <!-- Card 7: SDM Terlatih -->
                <div class="card-style p-6 rounded-xl flex items-start gap-4 transition-all duration-300 hover:shadow-lg hover:-translate-y-1">
                    <div class="bg-pink-100 p-3 rounded-lg"><svg class="w-6 h-6 text-pink-600" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 14l9-5-9-5-9 5 9 5z"></path><path d="M12 14l6.16-3.422a12.083 12.083 0 01.665 6.479A11.952 11.952 0 0012 20.055a11.952 11.952 0 00-6.824-2.998 12.078 12.078 0 01.665-6.479L12 14z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 14l9-5-9-5-9 5 9 5zm0 0l6.16-3.422a12.083 12.083 0 01.665 6.479A11.952 11.952 0 0012 20.055a11.952 11.952 0 00-6.824-2.998 12.078 12.078 0 01.665-6.479L12 14zm-4 6v-7.5l4-2.222 4 2.222V20M12 14L9 12.5M12 14l3 1.5M12 14v5.5"></path></svg></div>
                    <div>
                        <h3 id="card-title-7" class="font-semibold text-gray-500">SDM Dilatih (2025)</h3>
                        <p id="card-value-7" class="text-3xl font-bold text-gray-900 mt-1">25 <span class="text-lg font-medium text-gray-500">Orang</span></p>
                    </div>
                </div>
                <!-- Card 8: Efisiensi -->
                <div class="card-style p-6 rounded-xl flex items-start gap-4 transition-all duration-300 hover:shadow-lg hover:-translate-y-1">
                    <div class="bg-teal-100 p-3 rounded-lg"><svg class="w-6 h-6 text-teal-600" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 3.055A9.001 9.001 0 1020.945 13H11V3.055z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.488 9H15V3.512A9.025 9.025 0 0120.488 9z"></path></svg></div>
                    <div>
                        <h3 id="card-title-8" class="font-semibold text-gray-500">Efisiensi Operasional (2025)</h3>
                        <p id="card-value-8" class="text-3xl font-bold text-gray-900 mt-1">4.532 <span class="text-lg font-medium text-gray-500">Rp/m³</span></p>
                    </div>
                </div>
            </div>

            <!-- Charts Grid -->
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                <div class="card-style p-6 rounded-xl">
                    <h3 class="text-lg font-semibold mb-4 text-gray-900">Proyeksi Sambungan Baru & Cakupan Layanan</h3>
                    <div class="chart-container">
                        <canvas id="sambunganCakupanChart"></canvas>
                    </div>
                </div>
                <div class="card-style p-6 rounded-xl">
                    <h3 class="text-lg font-semibold mb-4 text-gray-900">Proyeksi Volume Produksi Air Minum (m³/hari)</h3>
                    <div class="chart-container">
                        <canvas id="produksiChart"></canvas>
                    </div>
                </div>
                <div class="card-style p-6 rounded-xl">
                    <h3 class="text-lg font-semibold mb-4 text-gray-900">Target Penurunan NRW & Peningkatan IKM</h3>
                    <div class="chart-container">
                        <canvas id="nrwIkmChart"></canvas>
                    </div>
                </div>
                <div class="card-style p-6 rounded-xl">
                    <h3 class="text-lg font-semibold mb-4 text-gray-900">Proyeksi Efisiensi & Pelatihan SDM (Kumulatif)</h3>
                    <div class="chart-container">
                        <canvas id="efisiensiSdmChart"></canvas>
                    </div>
                </div>
            </div>
        </main>
        
        <footer class="text-center mt-12 py-4 border-t border-gray-200">
            <p class="text-sm text-gray-500">&copy; 2025 PERUMDA Air Minum Tirta Indragiri.</p>
        </footer>
    </div>

    <script>
        // Data Store
        const renbisData = {
            '2025': { sambungan: 5105, produksi: 7791, cakupan: 9.4, nrw: 30.0, ikm: 90.2, aduan: 48, sdm: 25, efisiensi: 4532 },
            '2026': { sambungan: 4854, produksi: 9879, cakupan: 12.1, nrw: 27.5, ikm: 91.4, aduan: 42, sdm: 25, efisiensi: 3628 },
            '2027': { sambungan: 5620, produksi: 12504, cakupan: 15.2, nrw: 25.0, ikm: 92.6, aduan: 36, sdm: 25, efisiensi: 2968 },
            '2028': { sambungan: 7210, produksi: 16133, cakupan: 19.1, nrw: 22.5, ikm: 93.8, aduan: 30, sdm: 25, efisiensi: 2418 },
            '2029': { sambungan: 9311, produksi: 21771, cakupan: 24.2, nrw: 20.0, ikm: 95.0, aduan: 24, sdm: 25, efisiensi: 1960 },
        };

        const totalSrData = { '2025': 17162, '2026': 22016, '2027': 27636, '2028': 34846, '2029': 44157 };

        const years = ['2025', '2026', '2027', '2028', '2029'];
        
        // Data for Charts
        const dataSambunganBaru = years.map(y => renbisData[y].sambungan);
        const dataCakupan = years.map(y => renbisData[y].cakupan);
        const dataProduksi = years.map(y => renbisData[y].produksi);
        const dataNrw = years.map(y => renbisData[y].nrw);
        const dataIkm = years.map(y => renbisData[y].ikm);
        const dataEfisiensi = years.map(y => renbisData[y].efisiensi);
        const dataSdm = [25, 50, 75, 100, 125]; // Cumulative

        // Function to update cards
        function updateDashboard(year) {
            const data = renbisData[year];
            const totalSr = totalSrData[year];

            document.getElementById('card-title-1').innerText = `Sambungan Baru (${year})`;
            document.getElementById('card-value-1').innerHTML = `${data.sambungan.toLocaleString('id-ID')} <span class="text-lg font-medium text-gray-500">Unit</span>`;
            document.getElementById('card-total-sr').innerHTML = `Total Proyeksi: <span class="font-semibold text-gray-700">${totalSr.toLocaleString('id-ID')} SR</span>`;
            
            document.getElementById('card-title-2').innerText = `Target Produksi Air (${year})`;
            document.getElementById('card-value-2').innerHTML = `${data.produksi.toLocaleString('id-ID')} <span class="text-lg font-medium text-gray-500">m³/hari</span>`;
            
            document.getElementById('card-title-3').innerText = `Cakupan Layanan (${year})`;
            document.getElementById('card-value-3').innerText = `${data.cakupan.toLocaleString('id-ID')}%`;
            
            document.getElementById('card-title-4').innerText = `Target Penurunan NRW (${year})`;
            document.getElementById('card-value-4').innerText = `${data.nrw.toLocaleString('id-ID', {minimumFractionDigits: 2, maximumFractionDigits: 2})}%`;

            document.getElementById('card-title-5').innerText = `Skor Kepuasan (IKM) (${year})`;
            document.getElementById('card-value-5').innerHTML = `${data.ikm.toLocaleString('id-ID')} <span class="text-lg font-medium text-gray-500">/100</span>`;

            document.getElementById('card-title-6').innerText = `Penyelesaian Aduan (${year})`;
            document.getElementById('card-value-6').innerHTML = `&lt; ${data.aduan.toLocaleString('id-ID')} <span class="text-lg font-medium text-gray-500">Jam</span>`;

            document.getElementById('card-title-7').innerText = `SDM Dilatih (${year})`;
            document.getElementById('card-value-7').innerHTML = `${data.sdm.toLocaleString('id-ID')} <span class="text-lg font-medium text-gray-500">Orang</span>`;

            document.getElementById('card-title-8').innerText = `Efisiensi Operasional (${year})`;
            document.getElementById('card-value-8').innerHTML = `${data.efisiensi.toLocaleString('id-ID')} <span class="text-lg font-medium text-gray-500">Rp/m³</span>`;
        }

        // Event Listener for Selector
        document.getElementById('year-selector').addEventListener('change', (event) => {
            updateDashboard(event.target.value);
        });

        // Initial Load
        document.addEventListener('DOMContentLoaded', () => {
            updateDashboard('2025');
        });

        // Chart.js Global Config
        Chart.defaults.color = '#6B7280';
        Chart.defaults.borderColor = 'rgba(0, 0, 0, 0.05)';
        Chart.defaults.font.family = "'Inter', 'sans-serif'";

        const chartOptions = {
            responsive: true,
            maintainAspectRatio: false,
            interaction: { mode: 'index', intersect: false },
            scales: {
                x: { grid: { display: false }, ticks: { color: '#6B7280' } },
                y: { grid: { color: 'rgba(0, 0, 0, 0.05)' }, ticks: { color: '#6B7280' } }
            },
            plugins: {
                legend: { position: 'bottom', labels: { color: '#374151' } },
                tooltip: {
                    backgroundColor: '#ffffff',
                    titleColor: '#111827',
                    bodyColor: '#374151',
                    titleFont: { size: 14, weight: 'bold' },
                    bodyFont: { size: 12 },
                    padding: 12,
                    cornerRadius: 8,
                    borderColor: 'rgba(0, 0, 0, 0.1)',
                    borderWidth: 1,
                    boxShadow: '0 4px 6px rgba(0,0,0,0.1)'
                }
            }
        };

        const ctx1 = document.getElementById('sambunganCakupanChart').getContext('2d');
        const gradient1 = ctx1.createLinearGradient(0, 0, 0, 350);
        gradient1.addColorStop(0, 'rgba(139, 92, 246, 0.2)');
        gradient1.addColorStop(1, 'rgba(139, 92, 246, 0)');

        new Chart(ctx1, {
            type: 'bar',
            data: {
                labels: years,
                datasets: [{
                    label: 'Sambungan Baru (Unit)',
                    data: dataSambunganBaru,
                    backgroundColor: 'rgba(59, 130, 246, 0.8)',
                    borderColor: 'rgba(59, 130, 246, 1)',
                    borderWidth: 2, borderRadius: 4, yAxisID: 'y'
                }, {
                    label: 'Cakupan Layanan (%)',
                    data: dataCakupan,
                    type: 'line',
                    borderColor: 'rgba(139, 92, 246, 1)',
                    backgroundColor: gradient1,
                    tension: 0.4, fill: true, yAxisID: 'y1',
                    pointBackgroundColor: '#fff',
                    pointBorderColor: 'rgba(139, 92, 246, 1)'
                }]
            },
            options: { ...chartOptions, scales: { x: chartOptions.scales.x, y: { type: 'linear', display: true, position: 'left', title: { display: true, text: 'Jumlah Unit' } }, y1: { type: 'linear', display: true, position: 'right', title: { display: true, text: 'Persentase (%)' }, grid: { drawOnChartArea: false } } } }
        });

        const ctx2 = document.getElementById('produksiChart').getContext('2d');
        const gradient2 = ctx2.createLinearGradient(0, 0, 0, 350);
        gradient2.addColorStop(0, 'rgba(16, 185, 129, 0.3)');
        gradient2.addColorStop(1, 'rgba(16, 185, 129, 0)');
        
        new Chart(ctx2, {
            type: 'bar',
            data: {
                labels: years,
                datasets: [{
                    label: 'Volume Produksi (m³/hari)',
                    data: dataProduksi,
                    backgroundColor: gradient2,
                    borderColor: 'rgba(16, 185, 129, 1)',
                    borderWidth: 2, borderRadius: 4
                }]
            },
            options: chartOptions
        });

        const ctx3 = document.getElementById('nrwIkmChart').getContext('2d');
        const gradient3a = ctx3.createLinearGradient(0, 0, 0, 350);
        gradient3a.addColorStop(0, 'rgba(220, 38, 38, 0.2)');
        gradient3a.addColorStop(1, 'rgba(220, 38, 38, 0)');
        const gradient3b = ctx3.createLinearGradient(0, 0, 0, 350);
        gradient3b.addColorStop(0, 'rgba(217, 119, 6, 0.2)');
        gradient3b.addColorStop(1, 'rgba(217, 119, 6, 0)');

        new Chart(ctx3, {
            type: 'line',
            data: {
                labels: years,
                datasets: [{
                    label: 'NRW (%)',
                    data: dataNrw,
                    borderColor: 'rgba(239, 68, 68, 1)',
                    backgroundColor: gradient3a,
                    yAxisID: 'y', tension: 0.4, fill: true
                }, {
                    label: 'Skor IKM',
                    data: dataIkm,
                    borderColor: 'rgba(245, 158, 11, 1)',
                    backgroundColor: gradient3b,
                    yAxisID: 'y1', tension: 0.4, fill: true
                }]
            },
            options: { ...chartOptions, scales: { x: chartOptions.scales.x, y: { type: 'linear', display: true, position: 'left', title: { display: true, text: 'Persentase (%)' } }, y1: { type: 'linear', display: true, position: 'right', title: { display: true, text: 'Skor (0-100)' }, grid: { drawOnChartArea: false } } } }
        });

        const ctx4 = document.getElementById('efisiensiSdmChart').getContext('2d');
        new Chart(ctx4, {
            type: 'bar',
            data: {
                labels: years,
                datasets: [{
                    label: 'Biaya per m³ Terjual (Rp)',
                    data: dataEfisiensi,
                    backgroundColor: 'rgba(37, 99, 235, 0.8)',
                    borderColor: 'rgba(37, 99, 235, 1)',
                    borderWidth: 2, borderRadius: 4, yAxisID: 'y'
                }, {
                    label: 'SDM Dilatih (Kumulatif)',
                    data: dataSdm,
                    type: 'line',
                    borderColor: 'rgba(20, 184, 166, 1)',
                    backgroundColor: 'rgba(20, 184, 166, 0.1)',
                    yAxisID: 'y1', tension: 0.4, fill: false,
                    pointBackgroundColor: '#fff',
                    pointBorderColor: 'rgba(20, 184, 166, 1)'
                }]
            },
            options: { ...chartOptions, scales: { x: chartOptions.scales.x, y: { type: 'linear', display: true, position: 'left', title: { display: true, text: 'Rupiah per m³' } }, y1: { type: 'linear', display: true, position: 'right', title: { display: true, text: 'Jumlah Orang' }, grid: { drawOnChartArea: false } } } }
        });
    </script>

</body>
</html>
